{
  "apiVersion": "v1",
  "kind": "Template",
  "labels": {
    "template": "postgresql-persistent-template"
  },
  "metadata": {
    "creationTimestamp": null,
    "name": "nmp-postgresql-dc"
  },
  "parameters": [
    {
      "description": "The OpenShift ImageStream name.",
      "displayName": "IMAGE_STREAM_NAME",
      "name": "IMAGE_STREAM_NAME",
      "value": "postgresql-9.6-oracle-fdw"
    },
    {
      "description": "The OpenShift Namespace where the ImageStream resides.",
      "displayName": "Namespace",
      "name": "IMAGE_STREAM_NAMESPACE",
      "value": "nmp-agri-dev"
    },
    {
      "description": "The name of the OpenShift Service exposed for the database.",
      "displayName": "Database Service Name",
      "name": "DATABASE_SERVICE_NAME",
      "required": true,
      "value": "postgresql"
    },
    {
      "description": "Username for PostgreSQL user that will be used for accessing the database.",
      "displayName": "PostgreSQL Connection Username",
      "from": "user[A-Z0-9]{3}",
      "generate": "expression",
      "name": "POSTGRESQL_USER",
      "required": true
    },
    {
      "description": "Password for the PostgreSQL connection user.",
      "displayName": "PostgreSQL Connection Password",
      "from": "[a-zA-Z0-9]{16}",
      "generate": "expression",
      "name": "POSTGRESQL_PASSWORD",
      "required": true
    },
    {
      "description": "Name of the PostgreSQL database accessed.",
      "displayName": "PostgreSQL Database Name",
      "name": "POSTGRESQL_DATABASE",
      "required": true,
      "value": "AgriConfiguration"
    },
    {
      "description": "Volume space available for data, e.g. 512Mi, 2Gi.",
      "displayName": "Volume Capacity",
      "name": "VOLUME_CAPACITY",
      "required": true,
      "value": "1Gi"
    },
    {
      "description": "Version of PostgreSQL image to be used (9.5 or 9.6).",
      "displayName": "Version of PostgreSQL Image",
      "name": "IMAGE_STREAM_VERSION",
      "required": true,
      "value": "v1-stable"
    },
    {
      "name": "NAME_SUFFIX",
      "required": true
    }
  ],
  "objects": [
    {
      "apiVersion": "v1",
      "kind": "Secret",
      "metadata": {
        "annotations": {
          "template.openshift.io/expose-database_name": "{.data['database-name']}",
          "template.openshift.io/expose-password": "{.data['database-password']}",
          "template.openshift.io/expose-username": "{.data['database-user']}",
          "as-copy-of": "gwells-database-secrets"
        },
        "name": "${DATABASE_SERVICE_NAME}${NAME_SUFFIX}"
      },
      "stringData": {
        "database-name": "${POSTGRESQL_DATABASE}",
        "database-password": "${POSTGRESQL_PASSWORD}",
        "database-user": "${POSTGRESQL_USER}",
        "fdw-database-user": null,
        "fdw-database-password": null,
        "fdw-database-server": null,
        "fdw-database-schema": null
      }
    }
  ]
}